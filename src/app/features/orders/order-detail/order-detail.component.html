<div class="order-detail-container" *ngIf="!(loading$ | async) && order">
  <button mat-icon-button (click)="goBack()" class="back-button">
    <mat-icon>arrow_back</mat-icon>
  </button>

  <h1>Order #{{ order.orderId }}</h1>

  <div class="order-content">
    <mat-card class="order-info-card">
      <h2>Order Information</h2>
      
      <div class="info-row">
        <span class="label">Order Date:</span>
        <span class="value">{{ order.orderDate | date:'MMM d, y, h:mm a' }}</span>
      </div>

      <div class="info-row">
        <span class="label">Status:</span>
        <mat-chip [color]="getStatusColor(order.status)">
          {{ order.status }}
        </mat-chip>
      </div>

      <div class="info-row" *ngIf="order.discountAmount > 0">
        <span class="label">Discount Amount:</span>
        <span class="value">{{ order.discountAmount | currency }}</span>
      </div>
    </mat-card>

    <mat-card class="order-items-card">
      <h2>Order Items</h2>
      
      <div class="order-item" *ngFor="let item of order.items">
        <div class="item-info">
          <h3>{{ item.productName }}</h3>
          <p>Quantity: {{ item.quantity }}</p>
        </div>
        <div class="item-pricing">
          <span class="unit-price">{{ item.unitPrice | currency }} each</span>
          <span class="subtotal">{{ item.subtotal | currency }}</span>
        </div>
      </div>
    </mat-card>

    <mat-card class="order-summary-card">
      <h2>Order Summary</h2>
      
      <div class="summary-row">
        <span>Subtotal:</span>
        <span>{{ order.subTotal | currency }}</span>
      </div>

      <div class="summary-row" *ngIf="order.discountAmount > 0">
        <span>Discount:</span>
        <span class="discount">-{{ order.discountAmount | currency }}</span>
      </div>

      <div class="summary-row total">
        <span>Total:</span>
        <span>{{ order.totalAmount | currency }}</span>
      </div>
    </mat-card>
  </div>
</div>

<div class="loading-container" *ngIf="loading$ | async">
  <mat-spinner></mat-spinner>
</div>